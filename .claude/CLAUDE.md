# Sales AI Automation V3 - Project Guidelines

æ‰€æœ‰å›è¦†éƒ½è«‹ç”¨ç¹é«”ä¸­æ–‡å›è¦†

## Quick Reference

- **Format code**: `bun x ultracite fix`
- **Check for issues**: `bun x ultracite check`

---

## Documentation Management

### File Organization Rules

- **All `.md` files (except `CLAUDE.md`) must be placed in the `.doc/` directory**
- **All files MUST start with date prefix in `YYYYMMDD_` format**
- Use descriptive names in Traditional Chinese

**Good:** `.doc/20260115_Queue_Worker_Bugä¿®å¾©å ±å‘Š.md`
**Bad:** `BUG_FIX.md` (not in .doc, no date)

---

## Project Conventions

### ID æ ¼å¼è¦ç¯„

- **æ¡ˆä»¶ç·¨è™Ÿæ ¼å¼**ï¼š`YYYYMM-IC###`ï¼ˆå¦‚ï¼š`202601-IC046`ï¼‰
- **å®¢æˆ¶ç·¨è™Ÿæ ¼å¼**ï¼š`YYYYMM-######`ï¼ˆå¦‚ï¼š`201700-000001`ï¼‰

---

## Guardrails

- **æ°¸é ä¸è¦** åœ¨æœ‰æœªæäº¤è®Šæ›´æ™‚éƒ¨ç½²åˆ° production
- éƒ¨ç½²å‰å‹™å¿…åŸ·è¡Œæ¸¬è©¦ï¼Œä¸¦å…ˆéƒ¨ç½²åˆ° staging ç’°å¢ƒ

---

## Deployment Checklist

### Web å‰ç«¯éƒ¨ç½² (apps/web)

**âš ï¸ é‡è¦ï¼šç¢ºä¿ `.env.production` å­˜åœ¨ä¸”æ­£ç¢ºï¼**

```bash
# apps/web/.env.production å¿…é ˆåŒ…å«ï¼š
VITE_SERVER_URL=https://sales-ai-server.salesaiautomationv3.workers.dev
```

å¦‚æœç¼ºå°‘æ­¤æª”æ¡ˆï¼Œbuild æ™‚æœƒä½¿ç”¨ `.env` çš„ `localhost:3000`ï¼Œå°è‡´ production å‰ç«¯é€£æ¥åˆ°éŒ¯èª¤çš„å¾Œç«¯ã€‚

**éƒ¨ç½²å‘½ä»¤ï¼š**
```bash
cd apps/web
bun run build
bunx wrangler pages deploy dist --project-name=sales-ai-web --branch=main
```

### Server éƒ¨ç½² (apps/server)

```bash
cd apps/server
bunx wrangler deploy
```

### Slack Bot éƒ¨ç½² (apps/slack-bot)

```bash
cd apps/slack-bot
bunx wrangler deploy
```

### Queue Worker éƒ¨ç½² (apps/queue-worker)

```bash
cd apps/queue-worker
bunx wrangler deploy
```

---

## Business Logic Principles

### æ¥­å‹™æ•™ç·´è¼¸å‡ºåŸå‰‡

- **è¡Œå‹•å„ªå…ˆ**ï¼šä¸è¦çµ¦å ±å‘Šï¼Œçµ¦å…·é«”è¡Œå‹•
- **å…·é«”è©±è¡“**ï¼šä¸è¦èªªã€Œå»ºè­°è·Ÿé€²ã€ï¼Œçµ¦å‡ºã€Œæ‰“é›»è©±èªªï¼šç‹è€é—†ï¼Œæ˜¨å¤©...ã€

---

## ğŸ¤– è‡ªå‹•åŒ– Skills æŒ‡å¼•

Claude æœƒæ ¹æ“šæƒ…å¢ƒ**è‡ªå‹•åˆ¤æ–·ä¸¦èª¿ç”¨**ä»¥ä¸‹ skillsï¼Œç„¡éœ€æ‰‹å‹•è§¸ç™¼ï¼š

### ç¨‹å¼ç¢¼å“è³ªé¡ï¼ˆé–‹ç™¼ä¸­è‡ªå‹•åŸ·è¡Œï¼‰

| Skill | è‡ªå‹•è§¸ç™¼æ™‚æ©Ÿ | åŠŸèƒ½ |
|-------|-------------|------|
| `code-review` | å®ŒæˆåŠŸèƒ½é–‹ç™¼ã€ä¿®å¾© bugã€é‡æ§‹å¾Œ | ç¨‹å¼ç¢¼å¯©æŸ¥ã€ç°¡åŒ–å»ºè­°ã€å“è³ªè©•åˆ† |
| `typescript-quality` | ç·¨è¼¯ .ts/.tsx æª”æ¡ˆå¾Œ | å‹åˆ¥æª¢æŸ¥ã€lintã€æœ€ä½³å¯¦è¸ |
| `tdd-guard` | ä¿®æ”¹ç¨‹å¼ç¢¼æ™‚ | ç¢ºä¿æœ‰å°æ‡‰çš„æ¸¬è©¦è®Šæ›´ |

### å®‰å…¨é¡ï¼ˆæ¶‰åŠæ•æ„Ÿè³‡æ–™æ™‚è‡ªå‹•åŸ·è¡Œï¼‰

| Skill | è‡ªå‹•è§¸ç™¼æ™‚æ©Ÿ | åŠŸèƒ½ |
|-------|-------------|------|
| `secret-scanner` | æº–å‚™ commitã€ç·¨è¼¯è¨­å®šæª”æ™‚ | æƒæ API keysã€å¯†ç¢¼ç­‰æ•æ„Ÿè³‡è¨Š |
| `security-audit` | è™•ç†ç”¨æˆ¶è¼¸å…¥ã€è³‡æ–™åº«æ“ä½œã€API ç«¯é»æ™‚ | OWASP Top 10 æ¼æ´æª¢æ¸¬ |

### Git æµç¨‹é¡ï¼ˆç‰ˆæœ¬æ§åˆ¶æ™‚è‡ªå‹•åŸ·è¡Œï¼‰

| Skill | è‡ªå‹•è§¸ç™¼æ™‚æ©Ÿ | åŠŸèƒ½ |
|-------|-------------|------|
| `commit` | ç”¨æˆ¶èªªã€Œcommitã€ã€åŠŸèƒ½å®Œæˆæº–å‚™æäº¤æ™‚ | åˆ†æè®Šæ›´ã€ç”¢ç”Ÿ Conventional Commit |
| `pr-review` | ç”¨æˆ¶èªªã€Œå»ºç«‹ PRã€ã€æº–å‚™ merge æ™‚ | PR å¯©æŸ¥ã€é¢¨éšªæ¨™è¨˜ã€æ¸¬è©¦ç¢ºèª |
| `changelog` | ç™¼å¸ƒç‰ˆæœ¬ã€é‡Œç¨‹ç¢‘å®Œæˆæ™‚ | è‡ªå‹•ç”¢ç”Ÿè®Šæ›´æ—¥èªŒ |

### åŸ·è¡Œå„ªå…ˆé †åº

ç•¶å¤šå€‹ skills å¯èƒ½é©ç”¨æ™‚ï¼ŒæŒ‰ä»¥ä¸‹å„ªå…ˆé †åºåŸ·è¡Œï¼š

```
1. secret-scanner  ï¼ˆå®‰å…¨å„ªå…ˆï¼Œé˜»æ­¢æ•æ„Ÿè³‡è¨Šæ´©æ¼ï¼‰
2. typescript-quality  ï¼ˆç¢ºä¿ç¨‹å¼ç¢¼å¯ç·¨è­¯ï¼‰
3. tdd-guard  ï¼ˆç¢ºä¿æ¸¬è©¦è¦†è“‹ï¼‰
4. code-review  ï¼ˆç¨‹å¼ç¢¼å“è³ªå¯©æŸ¥ï¼‰
5. security-audit  ï¼ˆæ·±åº¦å®‰å…¨æª¢æŸ¥ï¼Œè¦–æƒ…æ³ï¼‰
```

### è‡ªå‹•åŸ·è¡Œè¦å‰‡

1. **å®ŒæˆåŠŸèƒ½é–‹ç™¼å¾Œ**ï¼šè‡ªå‹•åŸ·è¡Œ `code-review` + `typescript-quality`
2. **æº–å‚™ commit å‰**ï¼šè‡ªå‹•åŸ·è¡Œ `secret-scanner` + `tdd-guard`
3. **å»ºç«‹ PR å‰**ï¼šè‡ªå‹•åŸ·è¡Œ `pr-review`ï¼ˆåŒ…å«ä¸Šè¿°æ‰€æœ‰æª¢æŸ¥ï¼‰
4. **æ¶‰åŠç”¨æˆ¶è¼¸å…¥/è³‡æ–™åº«**ï¼šè‡ªå‹•åŸ·è¡Œ `security-audit`

### æ‰‹å‹•è§¸ç™¼

å¦‚éœ€æ‰‹å‹•è§¸ç™¼ï¼Œå¯ä½¿ç”¨ `/skill-name` æ ¼å¼ï¼š

```
/code-review          # æ‰‹å‹•åŸ·è¡Œç¨‹å¼ç¢¼å¯©æŸ¥
/secret-scanner       # æ‰‹å‹•æƒææ•æ„Ÿè³‡è¨Š
/security-audit       # æ‰‹å‹•å®‰å…¨å¯©è¨ˆ
/pr-review            # æ‰‹å‹• PR å¯©æŸ¥
```

---

## ğŸ“‹ å®Œæ•´ Skills åˆ—è¡¨

### é–‹ç™¼è¼”åŠ©
- `/test` - åŸ·è¡Œæ¸¬è©¦ï¼ˆå–®å…ƒã€æ•´åˆã€E2Eï¼‰
- `/code-review` - ç¨‹å¼ç¢¼å¯©æŸ¥èˆ‡ç°¡åŒ–
- `/typescript-quality` - TypeScript å“è³ªæª¢æŸ¥
- `/tdd-guard` - TDD å®ˆè­·

### å®‰å…¨
- `/secret-scanner` - æ•æ„Ÿè³‡è¨Šæƒæ
- `/security-audit` - æ·±åº¦å®‰å…¨å¯©è¨ˆ

### Git æµç¨‹
- `/commit` - æ™ºèƒ½æäº¤
- `/pr-review` - PR å¯©æŸ¥
- `/changelog` - è®Šæ›´æ—¥èªŒç”¢ç”Ÿ

### éƒ¨ç½²é‹ç¶­
- `/smart-deploy` - æ™ºæ…§éƒ¨ç½²
- `/diagnose` - ç”Ÿç”¢å•é¡Œè¨ºæ–·
- `/worker-logs` - Workers æ—¥èªŒæŸ¥è©¢
- `/report` - é‹ç‡Ÿå ±å‘Š

### æ¥­å‹™æŸ¥è©¢
- `/case` - æ¡ˆä»¶é€²åº¦æŸ¥è©¢
- `/opportunity` - æ©Ÿæœƒå¿«é€ŸæŸ¥è©¢
- `/todo-summary` - å¾…è¾¦çµ±è¨ˆç¸½è¦½

---

## ğŸ§  è¨ˆç•«æ¨¡å¼ (Plan Mode)

### ä½•æ™‚å¿…é ˆé€²å…¥è¨ˆç•«æ¨¡å¼

ä¿®æ”¹ä»¥ä¸‹é¡å‹æ™‚ï¼Œ**å¿…é ˆå…ˆè¦åŠƒå†åŸ·è¡Œ**ï¼š

| é¡å‹ | åŸå›  | æ­·å²æ•™è¨“ |
|-----|------|---------|
| Auth/Cookie è¨­å®š | å½±éŸ¿æ‰€æœ‰ç”¨æˆ¶ç™»å…¥ | æ›¾ä¾†å›ä¿®æ”¹ 3 æ¬¡ |
| CI workflow | å½±éŸ¿æ‰€æœ‰ PR | æ›¾ä¿®å¾© 4 æ¬¡æ‰ç©©å®š |
| API æ¬Šé™æª¢æŸ¥ | åŒæ¨£å•é¡Œæœƒåœ¨å¤šå€‹ router å‡ºç¾ | 3 å€‹ router åˆ†åˆ¥ä¿®å¾© |
| ç’°å¢ƒè®Šæ•¸ | å®¹æ˜“éºæ¼éƒ¨åˆ†æª”æ¡ˆ | æ¸¬è©¦æª”æ¡ˆæ¼æ”¹ 2 æ¬¡ |
| Dashboard æŸ¥è©¢é‚è¼¯ | éœ€æ±‚å®šç¾©å®¹æ˜“æœ‰è½å·® | æ›¾ä¿®å¾© 4 æ¬¡ |
| å ±å‘ŠåŠŸèƒ½ | æ¬Šé™æª¢æŸ¥è¤‡é›œã€è³‡æ–™æ ¼å¼å¤šç‰ˆæœ¬ | æ¬Šé™ä¸è¶³éŒ¯èª¤å¤šæ¬¡å‡ºç¾ |
| å‰ç«¯è³‡æ–™å­˜å– | null/undefined å°è‡´ crash | Internal Error å¤šæ¬¡å‡ºç¾ |

### è¨ˆç•«æ¨¡å¼æ¨™æº–æµç¨‹

```
éšæ®µä¸€ï¼šç†è§£ (Understand)
â”œâ”€â”€ 1. ç¢ºèªéœ€æ±‚ç¯„åœ
â”œâ”€â”€ 2. æœå°‹ç›¸é—œç¨‹å¼ç¢¼ (grep é¡ä¼¼å¯¦ä½œ)
â”œâ”€â”€ 3. æª¢æŸ¥æ˜¯å¦æœ‰æ­·å²æ•™è¨“ (æŸ¥ä¸‹æ–¹ã€Œæ­·å²æ•™è¨“ã€)
â””â”€â”€ 4. åˆ—å‡ºæ‰€æœ‰å—å½±éŸ¿çš„æª”æ¡ˆ

éšæ®µäºŒï¼šè¦åŠƒ (Plan)
â”œâ”€â”€ 5. åˆ—å‡ºå…·é«”æ­¥é©Ÿ
â”œâ”€â”€ 6. æ¨™è¨˜é¢¨éšªé» (ğŸ”´ é«˜ / ğŸŸ¡ ä¸­ / ğŸŸ¢ ä½)
â”œâ”€â”€ 7. è¨­è¨ˆé©—è­‰æ–¹æ¡ˆ (å¦‚ä½•ç¢ºèªä¿®å¥½äº†)
â””â”€â”€ 8. è«‹ç”¨æˆ¶ç¢ºèªè¨ˆç•«

éšæ®µä¸‰ï¼šåŸ·è¡Œ (Execute)
â”œâ”€â”€ 9. æŒ‰æ­¥é©Ÿå¯¦ä½œ
â”œâ”€â”€ 10. æ¯æ­¥å®Œæˆå¾Œæ¨™è¨˜ âœ…
â””â”€â”€ 11. é‡åˆ°å•é¡Œç«‹å³å›åˆ°è¨ˆç•«æ¨¡å¼

éšæ®µå››ï¼šé©—è­‰ (Verify)
â”œâ”€â”€ 12. åŸ·è¡Œé©—è­‰æ–¹æ¡ˆ
â”œâ”€â”€ 13. ç¢ºèªæ²’æœ‰å›æ­¸å•é¡Œ
â””â”€â”€ 14. æ›´æ–° CLAUDE.md (å¦‚æœå­¸åˆ°æ–°æ•™è¨“)
```

### è¨ˆç•«æ¨¡å¼æª¢æŸ¥æ¸…å–®

- [ ] ç”¨ `grep` æœå°‹æ‰€æœ‰é¡ä¼¼ç¨‹å¼ç¢¼
- [ ] åˆ—å‡ºæ‰€æœ‰éœ€è¦ä¿®æ”¹çš„æª”æ¡ˆ
- [ ] æª¢æŸ¥ã€Œæ­·å²æ•™è¨“ã€æ˜¯å¦æœ‰ç›¸é—œè¨˜éŒ„
- [ ] è¨­è¨ˆé©—è­‰æ–¹æ¡ˆï¼ˆæ€éº¼ç¢ºèªä¿®å¥½äº†ï¼‰
- [ ] è«‹ç”¨æˆ¶ç¢ºèªè¨ˆç•«

---

## ğŸ“œ æ­·å²æ•™è¨“ (Lessons Learned)

> æ¯æ¬¡ä¿®æ­£éŒ¯èª¤å¾Œï¼Œåœ¨æ­¤è¨˜éŒ„ä»¥é¿å…é‡è¹ˆè¦†è½

### OAuth/Cookie è¨­å®š (2026-02-01)

**æ­£ç¢ºé…ç½®ï¼š**
```typescript
// packages/auth/src/index.ts
defaultCookieAttributes: {
  sameSite: "lax",  // âœ… ä¸è¦ç”¨ "none"
  secure: true,
  httpOnly: true,
  // âŒ ä¸è¦åŠ  partitioned: true
}
```

**ä¿®æ”¹å‰å¿…é ˆæ¸¬è©¦ï¼š**
1. [ ] æ–°ç”¨æˆ¶ Google è¨»å†Š
2. [ ] å·²æœ‰ç”¨æˆ¶ Google ç™»å…¥
3. [ ] ç™»å…¥å¾Œé‡æ–°æ•´ç†é é¢
4. [ ] é—œé–‰ç€è¦½å™¨å¾Œé‡é–‹
5. [ ] å¾ production URL æ¸¬è©¦ (sales-ai-web.pages.dev)
6. [ ] å¾ localhost æ¸¬è©¦

**æ­·å²éŒ¯èª¤ï¼š**
- `sameSite: "none"` â†’ state_mismatch éŒ¯èª¤
- `partitioned: true` â†’ ç™»å…¥å¾Œè·³å›ç™»å…¥é 

---

### API Router æ¬Šé™æª¢æŸ¥ (2026-01-30)

**å•é¡Œæ¨¡å¼ï¼š** env è®Šæ•¸åœ¨ router ä¸­è®€å–å¤±æ•—

**ä¿®å¾©æ™‚å¿…é ˆæª¢æŸ¥æ‰€æœ‰ routerï¼š**
```bash
grep -r "env\." packages/api/src/routers/
```

**å·²çŸ¥å—å½±éŸ¿çš„ routerï¼š**
- `conversation.ts` âœ… å·²ä¿®å¾©
- `opportunity.ts` âœ… å·²ä¿®å¾©
- `sales-todo.ts` âœ… å·²ä¿®å¾©

**æ–°å¢ router æ™‚ï¼š** åƒè€ƒä¸Šè¿°å·²ä¿®å¾©çš„å¯«æ³•

---

### CI æ¸¬è©¦ç’°å¢ƒ (2026-01-28)

**æ­£ç¢ºçš„ CI æ¸¬è©¦è¨­å®šï¼š**
1. éœ€è¦å…ˆ buildï¼š`bun run build`
2. éœ€è¦å•Ÿå‹• serverï¼š`bun run dev &`
3. æ•´åˆæ¸¬è©¦éœ€è¦åœ¨ CI ä¸­ skip æˆ– mock

**ä¿®æ”¹ `.github/workflows/test.yml` å‰ï¼š**
- [ ] æœ¬åœ°æ¨¡æ“¬ CI ç’°å¢ƒæ¸¬è©¦
- [ ] ç¢ºèªæ‰€æœ‰æ¸¬è©¦é¡å‹éƒ½èƒ½é€šé

---

### Dashboard æŸ¥è©¢é‚è¼¯ (2026-01-29)

**ã€Œåˆ†æç¸½æ•¸ã€å®šç¾©ï¼š** æŸ¥è©¢ã€Œå·²å®Œæˆã€çš„å°è©±æ•¸ï¼Œä¸æ˜¯å…¨éƒ¨å°è©±

**ä¿®æ”¹ Dashboard ç›¸é—œé‚è¼¯å‰ï¼š**
- [ ] ç¢ºèªéœ€æ±‚å®šç¾©ï¼ˆèˆ‡ PM ç¢ºèªï¼‰
- [ ] åŠ å…¥å°æ‡‰çš„å–®å…ƒæ¸¬è©¦

---

### æ¸¬è©¦ç’°å¢ƒè®Šæ•¸ (2026-01-28)

**å•é¡Œæ¨¡å¼ï¼š** ç’°å¢ƒè®Šæ•¸åç¨±åœ¨ä¸åŒæª”æ¡ˆä¸­ä¸ä¸€è‡´

**ä¿®æ”¹ç’°å¢ƒè®Šæ•¸æ™‚ï¼š**
```bash
# æœå°‹æ‰€æœ‰ä½¿ç”¨è©²è®Šæ•¸çš„æª”æ¡ˆ
grep -r "VARIABLE_NAME" tests/ apps/ packages/
```

---

### å ±å‘Šæ¬Šé™ä¸è¶³éŒ¯èª¤ (2026-02-01)

**å•é¡Œæ¨¡å¼ï¼š** ç”¨æˆ¶æŸ¥çœ‹å ±å‘Šæ™‚å‡ºç¾ã€Œæ¬Šé™ä¸è¶³ã€æˆ–ã€Œç„¡æ³•è¼‰å…¥å ±å‘Šè³‡æ–™ã€

**å¸¸è¦‹åŸå› ï¼š**
1. ç”¨æˆ¶çš„ `userProfile` è¨˜éŒ„ä¸å­˜åœ¨ï¼ˆæ–°ç”¨æˆ¶ï¼‰
2. ç”¨æˆ¶çš„ `role` ç‚º null æˆ– `sales_rep`ï¼ˆé manager/adminï¼‰
3. ç”¨æˆ¶çš„ `department` è¨­å®šéŒ¯èª¤ï¼Œç„¡æ³•æŸ¥çœ‹ç‰¹å®šéƒ¨é–€å ±å‘Š

**æ¬Šé™æª¢æŸ¥ä½ç½®ï¼š**
```bash
# æœå°‹æ‰€æœ‰æ¬Šé™æª¢æŸ¥çš„ç¨‹å¼ç¢¼
grep -r "FORBIDDEN\|role.*manager\|role.*admin" packages/api/src/routers/
```

**ç›¸é—œæª”æ¡ˆï¼š**
- `packages/api/src/routers/analytics/rep-performance/index.ts` - å€‹äººå ±å‘Šæ¬Šé™
- `packages/api/src/routers/analytics/team-performance/index.ts` - åœ˜éšŠå ±å‘Šæ¬Šé™
- `packages/api/src/routers/analytics/mtd-uploads.ts` - MTD ä¸Šå‚³æ¬Šé™

**æ’æŸ¥æ­¥é©Ÿï¼š**
1. [ ] ç¢ºèªç”¨æˆ¶çš„ `userProfile` æ˜¯å¦å­˜åœ¨
2. [ ] ç¢ºèªç”¨æˆ¶çš„ `role` æ˜¯å¦æ­£ç¢ºï¼ˆmanager/adminï¼‰
3. [ ] ç¢ºèªç”¨æˆ¶çš„ `department` æ˜¯å¦èˆ‡ç›®æ¨™ä¸€è‡´
4. [ ] æª¢æŸ¥ API å›å‚³çš„éŒ¯èª¤è¨Šæ¯

---

### ç¶²é  Internal Error (2026-02-01)

**å•é¡Œæ¨¡å¼ï¼š** å‰ç«¯é é¢é¡¯ç¤ºã€ŒInternal Errorã€æˆ–ç©ºç™½

**å¸¸è¦‹åŸå› ï¼š**
1. API å›å‚³ null/undefinedï¼Œå‰ç«¯ç›´æ¥å­˜å–å±¬æ€§
2. KV Cache è³‡æ–™æ ¼å¼èˆ‡ç¨‹å¼ç¢¼é æœŸä¸ç¬¦
3. æ–°ç‰ˆ/èˆŠç‰ˆè³‡æ–™æ ¼å¼ä¸ç›¸å®¹

**æ’æŸ¥æ­¥é©Ÿï¼š**
1. [ ] æª¢æŸ¥ç€è¦½å™¨ Console çš„éŒ¯èª¤è¨Šæ¯
2. [ ] æª¢æŸ¥ Network é¢æ¿çš„ API å›æ‡‰
3. [ ] ç¢ºèªå¾Œç«¯ Worker æ—¥èªŒ

**å‰ç«¯é˜²ç¦¦æ€§ç¨‹å¼ç¢¼æ¨¡å¼ï¼š**
```typescript
// âŒ å±éšªï¼šç›´æ¥å­˜å–å¯èƒ½ç‚º null çš„å±¬æ€§
const score = report.summary.averageScore;

// âœ… å®‰å…¨ï¼šä½¿ç”¨ optional chaining å’Œé è¨­å€¼
const score = report?.summary?.averageScore ?? 0;
```

**ä¿®æ”¹å ±å‘Šç›¸é—œç¨‹å¼ç¢¼å‰ï¼š**
- [ ] ç¢ºèªæ–°èˆŠç‰ˆè³‡æ–™æ ¼å¼å·®ç•°
- [ ] åŠ å…¥ null check é˜²ç¦¦
- [ ] æ¸¬è©¦ç„¡å¿«å–è³‡æ–™çš„æƒ…æ³

---

## ğŸ”§ Bug ä¿®å¾© SOP

### ä¿®å¾©å‰

1. **å…¨å±€æœå°‹é¡ä¼¼å•é¡Œ**
   ```bash
   # æœå°‹é¡ä¼¼çš„ç¨‹å¼ç¢¼æ¨¡å¼
   grep -r "å•é¡Œé—œéµå­—" packages/ apps/
   ```

2. **æª¢æŸ¥æ­·å²æ•™è¨“**
   - æŸ¥çœ‹ä¸Šæ–¹ã€Œæ­·å²æ•™è¨“ã€å€å¡Š
   - æŸ¥çœ‹ git log æ˜¯å¦æœ‰é¡ä¼¼ä¿®å¾©ï¼š`git log --oneline | grep -i "é—œéµå­—"`

3. **åˆ—å‡ºæ‰€æœ‰éœ€è¦ä¿®æ”¹çš„æª”æ¡ˆ**

### ä¿®å¾©å¾Œ

1. **é©—è­‰ä¿®å¾©**
   - åŸ·è¡Œç›¸é—œæ¸¬è©¦
   - æ‰‹å‹•æ¸¬è©¦å—å½±éŸ¿çš„åŠŸèƒ½

2. **å›æ­¸æ¸¬è©¦**
   - ç¢ºèªæ²’æœ‰ç ´å£å…¶ä»–åŠŸèƒ½

3. **æ›´æ–°æ­·å²æ•™è¨“**
   - å¦‚æœæ˜¯æ–°é¡å‹çš„å•é¡Œï¼ŒåŠ å…¥ã€Œæ­·å²æ•™è¨“ã€å€å¡Š
   - å¦‚æœæ˜¯é‡è¤‡å•é¡Œï¼Œæ›´æ–°ç¾æœ‰è¨˜éŒ„ä¸¦åæ€ç‚ºä½•å†æ¬¡ç™¼ç”Ÿ
