# Agent B: æ¥­å‹™é‚è¼¯èˆ‡æ•´åˆå¯¦ä½œè¨ˆç•«
# Business Logic & Integration Implementation Plan

**è² è²¬ç¯„åœ:** æ¥­å‹™æµç¨‹ã€API æ•´åˆã€æ¸¬è©¦
**é–‹ç™¼é€±æœŸ:** 3 é€± (15 å€‹å·¥ä½œæ—¥)
**åˆ†æ”¯:** `feature/business-logic`

---

## ç¸½è¦½

Agent B è² è²¬æ¥­å‹™é‚è¼¯å’Œç³»çµ±æ•´åˆ,åŒ…æ‹¬:
- API ä»‹é¢å®šç¾©èˆ‡ä¿®æ”¹
- Queue Worker è½‰éŒ„é‚è¼¯
- MEDDIC åˆ†ææ•´åˆ
- Schemas æå–
- æ•´åˆæ¸¬è©¦èˆ‡ E2E æ¸¬è©¦
- éƒ¨ç½²åŸ·è¡Œ

---

## Week 1: æ ¸å¿ƒæ¶æ§‹ä¿®å¾© (5 å¤©)

### Day 1: API ä»‹é¢å®šç¾© + Mock Queue

#### ä¸Šåˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ B1.1: åˆ†æç¾æœ‰ API æµç¨‹** (1 å°æ™‚)
- [ ] é–±è®€ `packages/api/src/routers/conversation.ts`
- [ ] è­˜åˆ¥éœ€è¦ä¿®æ”¹çš„éƒ¨åˆ†
- [ ] è¨­è¨ˆæ–°çš„æµç¨‹æ¶æ§‹

**ä»»å‹™ B1.2: å‰µå»º Queue Mock** (2 å°æ™‚)
- [ ] å‰µå»º `packages/api/src/mocks/queue.ts`:
  ```typescript
  export class MockQueue {
    async send(message: TranscriptionMessage): Promise<void> {
      console.log('[Mock Queue] Received:', message);
      // æš«æ™‚åªè¨˜éŒ„,ä¸å¯¦éš›è™•ç†
    }
  }
  ```
- [ ] åœ¨ API ä¸­æ•´åˆ Mock Queue
- [ ] æ¸¬è©¦ Mock é‹ä½œ

**ä»»å‹™ B1.3: è¨­è¨ˆ API è®Šæ›´** (1 å°æ™‚)
- [ ] è¦åŠƒ `uploadConversation` ä¿®æ”¹:
  1. ä¸Šå‚³ R2 (ä¿æŒä¸è®Š)
  2. å»ºç«‹ DB è¨˜éŒ„ (status: 'pending')
  3. æ¨é€ Queue (ä½¿ç”¨ Mock)
  4. ç«‹å³è¿”å›
- [ ] ç§»é™¤ `executionCtx.waitUntil()` ç¨‹å¼ç¢¼
- [ ] æ–‡æª”åŒ–ä¿®æ”¹è¨ˆç•«

#### ä¸‹åˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ B1.4: å¯¦ä½œ API ä¿®æ”¹** (3 å°æ™‚)
- [ ] ä¿®æ”¹ `uploadConversation`:
  ```typescript
  // Step 5: å»ºç«‹è³‡æ–™åº«è¨˜éŒ„ (status: "pending")
  await db.insert(conversations).values({
    id: conversationId,
    status: 'pending',  // â† æ”¹ç‚º pending
    transcript: null,
    // ...
  });

  // Step 6: æ¨é€åˆ° Queue (å…ˆç”¨ Mock)
  await mockQueue.send({
    conversationId,
    opportunityId,
    audioUrl,
    // ...
  });

  // Step 7: ç«‹å³è¿”å›
  return {
    conversationId,
    status: 'pending',
    message: 'å·²æ¥æ”¶éŸ³æª”,æ­£åœ¨è™•ç†ä¸­...',
  };
  ```
- [ ] ç§»é™¤æ‰€æœ‰ `executionCtx.waitUntil()` ç¨‹å¼ç¢¼
- [ ] æ¸¬è©¦ API å¯ä»¥æ­£å¸¸è¿”å›

**ä»»å‹™ B1.5: æ’°å¯«æ•´åˆæ¸¬è©¦æ¡†æ¶** (1 å°æ™‚)
- [ ] å‰µå»º `test-upload-flow.ts`:
  ```typescript
  // æ¸¬è©¦å®Œæ•´ä¸Šå‚³æµç¨‹
  // 1. å‘¼å« API
  // 2. æª¢æŸ¥ DB è¨˜éŒ„ (status: pending)
  // 3. (ç¨å¾Œ) æª¢æŸ¥ Queue è¨Šæ¯
  ```
- [ ] æº–å‚™æ¸¬è©¦éŸ³æª” (5MB, 20MB, 96MB)

#### äº¤ä»˜ç‰©
- âœ… API ä¿®æ”¹å®Œæˆ (ä½¿ç”¨ Mock Queue)
- âœ… Mock Queue å¯¦ä½œ
- âœ… æ•´åˆæ¸¬è©¦æ¡†æ¶

---

### Day 2: Queue Worker è½‰éŒ„é‚è¼¯

#### ä¸Šåˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ B2.1: æå–è½‰éŒ„é‚è¼¯** (2 å°æ™‚)
- [ ] å¾ `conversation.ts` è¤‡è£½è½‰éŒ„ç›¸é—œç¨‹å¼ç¢¼
- [ ] å‰µå»º `apps/queue-worker/src/handlers/transcription.ts`:
  ```typescript
  import { errors } from '@Sales_ai_automation_v3/shared';
  import { createGroqWhisperService } from '@Sales_ai_automation_v3/services';

  export async function transcribeAudio(
    audioBuffer: Buffer,
    options: TranscriptionOptions
  ): Promise<TranscriptResult> {
    try {
      const whisper = createGroqWhisperService(env.GROQ_API_KEY);
      return await whisper.transcribe(audioBuffer, options);
    } catch (error) {
      throw errors.TRANSCRIPTION_FAILED(error.message);
    }
  }
  ```
- [ ] é‡æ§‹æˆæ¨¡çµ„åŒ–å‡½æ•¸

**ä»»å‹™ B2.2: å¯¦ç¾ DB å·¥å…·** (1 å°æ™‚)
- [ ] å‰µå»º `apps/queue-worker/src/utils/db.ts`:
  ```typescript
  export async function updateConversationStatus(
    db: Database,
    conversationId: string,
    status: ConversationStatus,
    data?: Partial<Conversation>
  ): Promise<void> {
    // DB æ›´æ–°é‚è¼¯
  }
  ```
- [ ] å¯¦ç¾æ›´æ–°å‡½æ•¸
- [ ] æ·»åŠ éŒ¯èª¤è™•ç†

**ä»»å‹™ B2.3: æ•´åˆåˆ° Queue Worker** (1 å°æ™‚)
- [ ] æ›´æ–° `apps/queue-worker/src/index.ts`:
  ```typescript
  // 1. ä¸‹è¼‰éŸ³æª”
  const audioBuffer = await downloadFromR2(audioUrl, env);

  // 2. è½‰éŒ„
  const transcript = await transcribeAudio(audioBuffer, {
    language: 'zh',
    chunkIfNeeded: true,
  });

  // 3. æ›´æ–° DB
  await updateConversationStatus(db, conversationId, 'transcribed', {
    transcript,
  });
  ```
- [ ] æ¸¬è©¦å°æª”æ¡ˆè™•ç†

#### ä¸‹åˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ B2.4: æ¸¬è©¦è½‰éŒ„æµç¨‹** (2 å°æ™‚)
- [ ] æº–å‚™æ¸¬è©¦éŸ³æª” (5MB, 10MB)
- [ ] æ¸¬è©¦å®Œæ•´æµç¨‹:
  1. æ¨é€è¨Šæ¯åˆ° Queue
  2. Worker è™•ç†
  3. æª¢æŸ¥ DB æ›´æ–°
- [ ] é©—è­‰ transcript æ­£ç¢ºä¿å­˜
- [ ] æ¸¬é‡è™•ç†æ™‚é–“

**ä»»å‹™ B2.5: æ›¿æ› Mock Queue** (2 å°æ™‚)
- [ ] åœ¨ API ä¸­æ›¿æ› Mock Queue ç‚ºçœŸå¯¦ Queue:
  ```typescript
  // åŸ: await mockQueue.send(...)
  // æ–°: await env.TRANSCRIPTION_QUEUE.send(...)
  ```
- [ ] æ¸¬è©¦ API â†’ Queue â†’ Worker å®Œæ•´æµç¨‹
- [ ] é©—è­‰ E2E é‹ä½œæ­£å¸¸

#### äº¤ä»˜ç‰©
- âœ… Queue Worker å¯è™•ç†è½‰éŒ„
- âœ… API æ•´åˆçœŸå¯¦ Queue
- âœ… E2E æ¸¬è©¦é€šé (å°æª”æ¡ˆ)

---

### Day 3: MEDDIC åˆ†ææ•´åˆ

#### ä¸Šåˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ B3.1: å‰µå»ºåˆ†ææ¨¡çµ„** (2 å°æ™‚)
- [ ] å‰µå»º `apps/queue-worker/src/handlers/analysis.ts`:
  ```typescript
  import { createGeminiClient, createOrchestrator } from '@Sales_ai_automation_v3/services';
  import { errors } from '@Sales_ai_automation_v3/shared';

  export async function analyzeMEDDIC(
    transcript: Transcript,
    context: {
      conversationId: string;
      opportunityId: string;
    },
    env: Env
  ): Promise<MEDDICAnalysis> {
    try {
      const gemini = createGeminiClient(env.GEMINI_API_KEY);
      const orchestrator = createOrchestrator(gemini);

      return await orchestrator.analyze(
        transcript.segments,
        context
      );
    } catch (error) {
      throw errors.GEMINI_API_ERROR(error.message);
    }
  }
  ```
- [ ] å¯¦ç¾éŒ¯èª¤è™•ç†
- [ ] æ·»åŠ æ—¥èªŒ

**ä»»å‹™ B3.2: æ•´åˆå®Œæ•´æµç¨‹** (2 å°æ™‚)
- [ ] æ›´æ–° `apps/queue-worker/src/index.ts`:
  ```typescript
  try {
    // 1. ä¸‹è¼‰
    const audioBuffer = await downloadFromR2(audioUrl, env);

    // 2. è½‰éŒ„
    const transcript = await transcribeAudio(audioBuffer, options);
    await updateConversationStatus(db, id, 'transcribed', { transcript });

    // 3. åˆ†æ
    const analysis = await analyzeMEDDIC(transcript, context, env);
    await saveAnalysisResult(db, id, analysis);
    await updateConversationStatus(db, id, 'completed');

    // 4. é€šçŸ¥
    await slack.notifyTranscriptionComplete({ ... });

    message.ack();
  } catch (error) {
    await markConversationFailed(db, id, formatErrorForUser(error));
    await slack.notifyTranscriptionFailed({ ... });
    message.retry();
  }
  ```

#### ä¸‹åˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ B3.3: æ¸¬è©¦å¤§æª”æ¡ˆè™•ç†** (2 å°æ™‚)
- [ ] æº–å‚™ 96MB æ¸¬è©¦éŸ³æª”
- [ ] æ¸¬è©¦å®Œæ•´æµç¨‹
- [ ] ç›£æ§è™•ç†æ™‚é–“
- [ ] é©—è­‰ä¸æœƒè¶…æ™‚
- [ ] æª¢æŸ¥ DB è¨˜éŒ„æ­£ç¢º

**ä»»å‹™ B3.4: æ¸¬è©¦éŒ¯èª¤å ´æ™¯** (2 å°æ™‚)
- [ ] æ¸¬è©¦ R2 ä¸‹è¼‰å¤±æ•—
- [ ] æ¸¬è©¦ Groq API éŒ¯èª¤
- [ ] æ¸¬è©¦ Gemini API éŒ¯èª¤
- [ ] æ¸¬è©¦ DB éŒ¯èª¤
- [ ] é©—è­‰é‡è©¦æ©Ÿåˆ¶
- [ ] é©—è­‰ Slack é€šçŸ¥

#### äº¤ä»˜ç‰©
- âœ… MEDDIC åˆ†ææ•´åˆå®Œæˆ
- âœ… å®Œæ•´æµç¨‹å¯è™•ç†å¤§æª”æ¡ˆ
- âœ… éŒ¯èª¤è™•ç†å®Œå–„

---

### Day 4: æ•´åˆæ¸¬è©¦

#### å…¨æ—¥ä»»å‹™ (8 å°æ™‚)

**ä»»å‹™ B4.1: E2E æ¸¬è©¦è…³æœ¬** (3 å°æ™‚)
- [ ] å‰µå»º `test-queue-integration.sh`:
  ```bash
  # 1. å°æª”æ¡ˆæ¸¬è©¦ (5MB)
  # 2. ä¸­æª”æ¡ˆæ¸¬è©¦ (20MB)
  # 3. å¤§æª”æ¡ˆæ¸¬è©¦ (96MB)
  # 4. æª¢æŸ¥ Queue ç‹€æ…‹
  # 5. æª¢æŸ¥ DB è¨˜éŒ„
  # 6. æª¢æŸ¥ Slack é€šçŸ¥
  ```
- [ ] åŸ·è¡Œæ¸¬è©¦
- [ ] è¨˜éŒ„çµæœ

**ä»»å‹™ B4.2: éŒ¯èª¤å ´æ™¯æ•´åˆæ¸¬è©¦** (3 å°æ™‚)
- [ ] æ¸¬è©¦ä¸æ”¯æ´æ ¼å¼
- [ ] æ¸¬è©¦è¶…å¤§æª”æ¡ˆ (>200MB)
- [ ] æ¸¬è©¦ API éŒ¯èª¤
- [ ] æ¸¬è©¦ç¶²è·¯éŒ¯èª¤
- [ ] é©—è­‰ Slack é€šçŸ¥æ­£ç¢º

**ä»»å‹™ B4.3: æ€§èƒ½æ¸¬è©¦** (2 å°æ™‚)
- [ ] æ¸¬è©¦è™•ç†æ™‚é–“:
  - 5MB < 2 åˆ†é˜
  - 20MB < 5 åˆ†é˜
  - 96MB < 15 åˆ†é˜
- [ ] æ¸¬è©¦ä¸¦ç™¼è™•ç† (5 å€‹æª”æ¡ˆ)
- [ ] æ¸¬è©¦ Queue å»¶é²
- [ ] è¨˜éŒ„ç“¶é ¸

#### äº¤ä»˜ç‰©
- âœ… E2E æ¸¬è©¦é€šé
- âœ… æ€§èƒ½é”æ¨™
- âœ… éŒ¯èª¤è™•ç†é©—è­‰

---

### Day 5: Bug ä¿®å¾©èˆ‡æ–‡æª”

#### ä¸Šåˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ 5.1: Bug ä¿®å¾©** (3 å°æ™‚)
- [ ] ä¿®å¾© Day 4 ç™¼ç¾çš„æ‰€æœ‰ Bug
- [ ] å„ªåŒ–æ—¥èªŒè¼¸å‡º
- [ ] å„ªåŒ–éŒ¯èª¤è¨Šæ¯æ–‡æ¡ˆ
- [ ] ä»£ç¢¼ Review

**ä»»å‹™ 5.2: ä»£ç¢¼è¦ç¯„æª¢æŸ¥** (1 å°æ™‚)
- [ ] é‹è¡Œ `bun x ultracite fix`
- [ ] ä¿®å¾©æ‰€æœ‰ lint è­¦å‘Š
- [ ] çµ±ä¸€ä»£ç¢¼é¢¨æ ¼

#### ä¸‹åˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ 5.3: æ’°å¯«æ–‡æª”** (2 å°æ™‚)
- [ ] æ›´æ–° README
- [ ] å‰µå»º `ARCHITECTURE.md` (æ¥­å‹™æµç¨‹éƒ¨åˆ†)
- [ ] è¨˜éŒ„ Slack é€šçŸ¥æµç¨‹

**ä»»å‹™ 5.4: æº–å‚™ Week 2** (2 å°æ™‚)
- [ ] Review Week 1 æˆæœ
- [ ] æ•´ç†å¾…è¾¦äº‹é …
- [ ] è¦åŠƒ Week 2 åˆ†å·¥

---

## Week 2: Better-T Stack é‡æ§‹ (5 å¤©)

### Day 1: æ€§èƒ½æ¸¬è©¦èˆ‡é©—è­‰

#### ä¸Šåˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ B1.1: æº–å‚™æ¸¬è©¦ç’°å¢ƒ** (1 å°æ™‚)
- [ ] æ¸…é™¤æ‰€æœ‰ç·©å­˜
- [ ] æº–å‚™æ¸¬è©¦è…³æœ¬
- [ ] è¨˜éŒ„ç•¶å‰æ§‹å»ºæ™‚é–“

**ä»»å‹™ B1.2: æ¸¬è©¦åŸå§‹æ§‹å»ºæ€§èƒ½** (1 å°æ™‚)
- [ ] é‹è¡Œ 3 æ¬¡å®Œæ•´æ§‹å»º (ä¸ä½¿ç”¨ Turborepo)
- [ ] è¨˜éŒ„å¹³å‡æ™‚é–“
- [ ] è­˜åˆ¥æœ€æ…¢çš„ package

**ä»»å‹™ B1.3: ç­‰å¾… Agent A å®Œæˆ** (2 å°æ™‚)
- [ ] å”åŠ© Agent A æ¸¬è©¦é…ç½®
- [ ] æº–å‚™æ€§èƒ½å°æ¯”å ±å‘Šæ¨¡æ¿

#### ä¸‹åˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ B1.4: æ¸¬è©¦ Turborepo æ€§èƒ½** (2 å°æ™‚)
- [ ] ç¬¬ä¸€æ¬¡æ§‹å»º (å†·å•Ÿå‹•): `turbo run build`
- [ ] ç¬¬äºŒæ¬¡æ§‹å»º (ç·©å­˜): `turbo run build`
- [ ] éƒ¨åˆ†ä¿®æ”¹å¾Œæ§‹å»º
- [ ] è¨˜éŒ„æ‰€æœ‰æ™‚é–“

**ä»»å‹™ B1.5: æ€§èƒ½åˆ†æå ±å‘Š** (2 å°æ™‚)
- [ ] å°æ¯”åŸå§‹ vs Turborepo æ€§èƒ½
- [ ] è¨ˆç®—æå‡ç™¾åˆ†æ¯”
- [ ] è­˜åˆ¥å„ªåŒ–ç©ºé–“
- [ ] æ’°å¯«å ±å‘Š

#### äº¤ä»˜ç‰©
- âœ… æ€§èƒ½æ¸¬è©¦å®Œæˆ
- âœ… æ€§èƒ½åˆ†æå ±å‘Š
- âœ… å„ªåŒ–å»ºè­°

---

### Day 2-3: æå– Schemas

#### Day 2 ä¸Šåˆ (4 å°æ™‚)

**ä»»å‹™ B2.1: å‰µå»º Schemas çµæ§‹** (1 å°æ™‚)
- [ ] å‰µå»º `packages/shared/src/schemas/` ç›®éŒ„
- [ ] è¦åŠƒ schema åˆ†é¡

**ä»»å‹™ B2.2: æå– Conversation Schemas** (1.5 å°æ™‚)
- [ ] å‰µå»º `schemas/conversation.ts`:
  ```typescript
  import { z } from 'zod';

  export const conversationStatusSchema = z.enum([...]);
  export const conversationTypeSchema = z.enum([...]);
  export const transcriptSegmentSchema = z.object({...});
  export const transcriptSchema = z.object({...});
  export const uploadConversationSchema = z.object({...});
  ```

**ä»»å‹™ B2.3: æå– MEDDIC Schemas** (1.5 å°æ™‚)
- [ ] å‰µå»º `schemas/meddic.ts`
- [ ] å®šç¾©æ‰€æœ‰ MEDDIC validation schemas

#### Day 2 ä¸‹åˆ (4 å°æ™‚)

**ä»»å‹™ B2.4: æå– Opportunity Schemas** (2 å°æ™‚)
- [ ] å‰µå»º `schemas/opportunity.ts`
- [ ] å®šç¾©æ‰€æœ‰ Opportunity validation schemas

**ä»»å‹™ B2.5: æå–é€šç”¨ Schemas** (2 å°æ™‚)
- [ ] å‰µå»º `schemas/common.ts` (metadata, pagination, etc.)
- [ ] å‰µå»º schemas index å°å‡º

#### Day 3 ä¸Šåˆ (4 å°æ™‚)

**ä»»å‹™ B2.6: æ›´æ–° API ä½¿ç”¨ Shared Schemas** (4 å°æ™‚)
- [ ] æ›´æ–° `packages/api/src/routers/conversation.ts`
- [ ] æ›´æ–°å…¶ä»– API routers
- [ ] ç§»é™¤æœ¬åœ° schema å®šç¾©
- [ ] æ¸¬è©¦ API validation æ­£å¸¸

#### Day 3 ä¸‹åˆ (4 å°æ™‚)

**ä»»å‹™ B2.7: æ›´æ–°å…¶ä»–æ¨¡çµ„** (4 å°æ™‚)
- [ ] æ›´æ–° Slack Bot ä½¿ç”¨ shared schemas
- [ ] æ›´æ–°æ¸¬è©¦æª”æ¡ˆ
- [ ] é‹è¡Œæ‰€æœ‰æ¸¬è©¦ç¢ºä¿é€šé

#### äº¤ä»˜ç‰©
- âœ… æ‰€æœ‰ Schemas æå–å®Œæˆ
- âœ… API validation æ­£å¸¸
- âœ… æ¸¬è©¦é€šé

---

### Day 4: tRPC è©•ä¼°èˆ‡æ±ºç­–

#### ä¸Šåˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ B4.1: è©•ä¼°é·ç§»æˆæœ¬** (2 å°æ™‚)
- [ ] åˆ—å‡ºéœ€è¦æ”¹å¯«çš„æª”æ¡ˆæ¸…å–®
- [ ] ä¼°ç®—æ¯å€‹æª”æ¡ˆçš„æ”¹å¯«æ™‚é–“
- [ ] è¨ˆç®—ç¸½æ™‚é–“æˆæœ¬
- [ ] è­˜åˆ¥é¢¨éšªé»

**ä»»å‹™ B4.2: ç ”ç©¶ oRPC** (2 å°æ™‚)
- [ ] é–±è®€ oRPC æ–‡æª”
- [ ] è©•ä¼°ç•¶å‰ä½¿ç”¨æ»¿æ„åº¦
- [ ] åˆ—å‡º oRPC å„ªç¼ºé»
- [ ] è¨˜éŒ„ç­†è¨˜

#### ä¸‹åˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ B4.3: å¡«å¯«è©•ä¼°çŸ©é™£** (2 å°æ™‚)
- [ ] æ ¹æ“š Agent A çš„ POC çµæœå¡«å¯«è©•ä¼°è¡¨:

| æŒ‡æ¨™ | oRPC | tRPC | æ¬Šé‡ | è©•åˆ† |
|------|------|------|------|------|
| é¡å‹å®‰å…¨ | ? | ? | 30% | ? |
| ç”Ÿæ…‹ç³»çµ± | ? | ? | 25% | ? |
| é·ç§»æˆæœ¬ | ? | ? | 20% | ? |
| æ€§èƒ½ | ? | ? | 15% | ? |
| æ–‡æª” | ? | ? | 10% | ? |

**ä»»å‹™ B4.4: æ’°å¯«è©•ä¼°å ±å‘Š** (2 å°æ™‚)
- [ ] æ•´ç†è©•ä¼°çµæœ
- [ ] æä¾›æ±ºç­–å»ºè­°
- [ ] è¨˜éŒ„é¢¨éšªèˆ‡æ‡‰å°ç­–ç•¥
- [ ] æº–å‚™ Day 5 æ±ºç­–æœƒè­°

#### äº¤ä»˜ç‰©
- âœ… å®Œæ•´è©•ä¼°å ±å‘Š
- âœ… æ±ºç­–å»ºè­°
- âœ… é·ç§»è¨ˆç•« (å¦‚éœ€è¦)

---

### Day 5: æ±ºç­–èˆ‡æ–‡æª”

#### ä¸Šåˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ 5.1: æ±ºç­–æœƒè­°** (2 å°æ™‚)
- [ ] Review tRPC è©•ä¼°çµæœ
- [ ] è¨è«–æ±ºç­–æ¨™æº–
- [ ] åšå‡ºæœ€çµ‚æ±ºå®š
- [ ] è¨˜éŒ„æ±ºç­–ç†ç”±

**ä»»å‹™ 5.2: æ’°å¯«æ¶æ§‹æ–‡æª”** (2 å°æ™‚)
- [ ] æ›´æ–° `ARCHITECTURE.md`:
  - Slack é€šçŸ¥æµç¨‹
  - API è¨­è¨ˆ (oRPC æˆ– tRPC)

#### ä¸‹åˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ 5.3: æ›´æ–°æ–‡æª”** (2 å°æ™‚)
- [ ] å‰µå»º `DEPLOYMENT.md` (éƒ¨ç½²æŒ‡å—)
- [ ] æ›´æ–°æ‰€æœ‰ç›¸é—œæ–‡æª”

**ä»»å‹™ 5.4: æ•´ç† Week 1-2 æˆæœ** (2 å°æ™‚)
- [ ] æ›´æ–° `CHANGELOG.md`
- [ ] è¨˜éŒ„ Breaking Changes
- [ ] æº–å‚™ Week 3 æ¸¬è©¦è¨ˆç•«

---

## Week 3: æ¸¬è©¦èˆ‡ä¸Šç·š (5 å¤©)

### Day 1-2: æ•´åˆæ¸¬è©¦èˆ‡ E2E

#### Day 1 ä¸Šåˆ (4 å°æ™‚)

**ä»»å‹™ B1.1: å‰µå»º E2E æ¸¬è©¦æ¡†æ¶** (4 å°æ™‚)
- [ ] å‰µå»º `test-queue-integration.sh`
- [ ] å‰µå»º `check-db-conversations.ts`
- [ ] æº–å‚™æ¸¬è©¦éŸ³æª” (5MB, 20MB, 50MB, 96MB)
- [ ] è¨­å®šæ¸¬è©¦ç’°å¢ƒ

#### Day 1 ä¸‹åˆ (4 å°æ™‚)

**ä»»å‹™ B1.2: åŸ·è¡Œ E2E æ¸¬è©¦** (4 å°æ™‚)
- [ ] æ¸¬è©¦å°æª”æ¡ˆæµç¨‹ (5MB)
- [ ] æ¸¬è©¦ä¸­æª”æ¡ˆæµç¨‹ (20MB)
- [ ] æ¸¬è©¦å¤§æª”æ¡ˆæµç¨‹ (96MB)
- [ ] é©—è­‰æ¯å€‹æ­¥é©Ÿ:
  - Slack ä¸Šå‚³
  - API æ¥æ”¶
  - Queue æ¨é€
  - Worker è™•ç†
  - DB æ›´æ–°
  - Slack é€šçŸ¥

#### Day 2 ä¸Šåˆ (4 å°æ™‚)

**ä»»å‹™ B1.3: éŒ¯èª¤å ´æ™¯æ¸¬è©¦** (4 å°æ™‚)
- [ ] æ¸¬è©¦å ´æ™¯ 1: ä¸æ”¯æ´æ ¼å¼
- [ ] æ¸¬è©¦å ´æ™¯ 2: è¶…å¤§æª”æ¡ˆ (>200MB)
- [ ] æ¸¬è©¦å ´æ™¯ 3: R2 ä¸‹è¼‰å¤±æ•—
- [ ] æ¸¬è©¦å ´æ™¯ 4: Groq API éŒ¯èª¤
- [ ] æ¸¬è©¦å ´æ™¯ 5: Gemini API éŒ¯èª¤
- [ ] æ¸¬è©¦å ´æ™¯ 6: DB é€£æ¥å¤±æ•—

#### Day 2 ä¸‹åˆ (4 å°æ™‚)

**ä»»å‹™ B1.4: é©—è­‰éŒ¯èª¤è™•ç†** (4 å°æ™‚)
- [ ] é©—è­‰æ¯å€‹éŒ¯èª¤å ´æ™¯çš„ Slack é€šçŸ¥
- [ ] é©—è­‰éŒ¯èª¤è¨Šæ¯å‹å–„
- [ ] é©—è­‰é‡è©¦æ©Ÿåˆ¶
- [ ] é©—è­‰ Dead Letter Queue
- [ ] è¨˜éŒ„æ¸¬è©¦çµæœ

#### äº¤ä»˜ç‰©
- âœ… E2E æ¸¬è©¦é€šé
- âœ… æ‰€æœ‰éŒ¯èª¤å ´æ™¯é©—è­‰
- âœ… æ¸¬è©¦å ±å‘Š

---

### Day 3: å£“åŠ›æ¸¬è©¦

#### ä¸Šåˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ B3.1: ä¸¦ç™¼æ¸¬è©¦** (4 å°æ™‚)
- [ ] ä¸¦ç™¼å ´æ™¯ 1: 10 å€‹ 5MB æª”æ¡ˆåŒæ™‚
  - è¨˜éŒ„ Queue å»¶é²
  - è¨˜éŒ„ç¸½è™•ç†æ™‚é–“
  - è¨˜éŒ„æˆåŠŸç‡
- [ ] ä¸¦ç™¼å ´æ™¯ 2: 5 å€‹ 20MB æª”æ¡ˆåŒæ™‚
  - è¨˜éŒ„æ•¸æ“š
- [ ] ä¸¦ç™¼å ´æ™¯ 3: 2 å€‹ 96MB æª”æ¡ˆåŒæ™‚
  - è¨˜éŒ„æ•¸æ“š
- [ ] åˆ†æç³»çµ±è¡Œç‚º

#### ä¸‹åˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ B3.2: æ¥µé™æ¸¬è©¦** (2 å°æ™‚)
- [ ] æ¸¬è©¦æœ€å¤§ä¸¦ç™¼æ•¸ (æŒçºŒæ¨é€ç›´åˆ°å‡ºç¾å»¶é²)
- [ ] æ¸¬è©¦ Queue å †ç©è™•ç†èƒ½åŠ›
- [ ] æ¸¬è©¦ç³»çµ±æ¢å¾©èƒ½åŠ›
- [ ] è¨˜éŒ„æ¥µé™å€¼

**ä»»å‹™ B3.3: é•·æ™‚é–“ç©©å®šæ€§æ¸¬è©¦** (2 å°æ™‚)
- [ ] é‹è¡Œ 2 å°æ™‚æŒçºŒè™•ç†æ¸¬è©¦
- [ ] ç›£æ§è¨˜æ†¶é«”ä½¿ç”¨
- [ ] ç›£æ§éŒ¯èª¤ç‡
- [ ] è¨˜éŒ„ç©©å®šæ€§æ•¸æ“š

#### äº¤ä»˜ç‰©
- âœ… å£“åŠ›æ¸¬è©¦å ±å‘Š
- âœ… ç³»çµ±æ¥µé™æ•¸æ“š
- âœ… ç©©å®šæ€§å ±å‘Š

---

### Day 4: éƒ¨ç½²åŸ·è¡Œ

#### ä¸Šåˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ B4.1: ç­‰å¾… Agent A æº–å‚™å®Œæˆ** (1 å°æ™‚)
- [ ] Review éƒ¨ç½²æª¢æŸ¥æ¸…å–®
- [ ] ç¢ºèª Rollback è¨ˆç•«

**ä»»å‹™ B4.2: éƒ¨ç½² Queue Worker** (1.5 å°æ™‚)
- [ ] é‹è¡Œéƒ¨ç½²:
  ```bash
  cd apps/queue-worker
  wrangler deploy
  ```
- [ ] é©—è­‰éƒ¨ç½²æˆåŠŸ
- [ ] æª¢æŸ¥ç’°å¢ƒè®Šæ•¸
- [ ] æ¸¬è©¦æ¨é€æ¸¬è©¦è¨Šæ¯
- [ ] æª¢æŸ¥ logs

**ä»»å‹™ B4.3: éƒ¨ç½² Server** (1.5 å°æ™‚)
- [ ] é‹è¡Œéƒ¨ç½²:
  ```bash
  cd apps/server
  wrangler deploy
  ```
- [ ] é©—è­‰ Queue binding
- [ ] æ¸¬è©¦ API endpoints
- [ ] æª¢æŸ¥ logs

#### ä¸‹åˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ B4.4: éƒ¨ç½² Slack Bot** (1.5 å°æ™‚)
- [ ] é‹è¡Œéƒ¨ç½²:
  ```bash
  cd apps/slack-bot
  wrangler deploy
  ```
- [ ] æ¸¬è©¦ Slack äº‹ä»¶æ¥æ”¶
- [ ] æ¸¬è©¦æª”æ¡ˆä¸Šå‚³
- [ ] é©—è­‰é€šçŸ¥ç™¼é€

**ä»»å‹™ B4.5: ç”Ÿç”¢ç’°å¢ƒé©—è­‰** (2.5 å°æ™‚)
- [ ] ä¸Šå‚³å°æª”æ¡ˆæ¸¬è©¦ (5MB)
- [ ] æª¢æŸ¥å®Œæ•´æµç¨‹
- [ ] æª¢æŸ¥ Slack é€šçŸ¥
- [ ] æª¢æŸ¥ DB è¨˜éŒ„
- [ ] ä¸Šå‚³ä¸­ç­‰æª”æ¡ˆæ¸¬è©¦ (20MB)
- [ ] ä¸Šå‚³å¤§æª”æ¡ˆæ¸¬è©¦ (96MB)
- [ ] è¨˜éŒ„æ‰€æœ‰çµæœ

#### äº¤ä»˜ç‰©
- âœ… æ‰€æœ‰æœå‹™éƒ¨ç½²æˆåŠŸ
- âœ… ç”Ÿç”¢ç’°å¢ƒæ¸¬è©¦é€šé
- âœ… éƒ¨ç½²å ±å‘Š

---

### Day 5: ç›£æ§èˆ‡èª¿å„ª

#### ä¸Šåˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ 5.1: ç›£æ§åˆæœŸæ•¸æ“š** (2 å°æ™‚)
- [ ] æ”¶é›†å‰ 10 å€‹è™•ç†çš„æ•¸æ“š
- [ ] åˆ†æè™•ç†æ™‚é–“
- [ ] åˆ†ææˆåŠŸç‡
- [ ] åˆ†æ Queue å»¶é²
- [ ] è­˜åˆ¥ç•°å¸¸

**ä»»å‹™ 5.2: æ€§èƒ½èª¿å„ª** (2 å°æ™‚)
- [ ] æ ¹æ“šç›£æ§æ•¸æ“šèª¿æ•´:
  - Queue `max_batch_size`
  - Queue `max_wait_time_ms`
  - Worker é…ç½®
- [ ] å„ªåŒ–æ…¢æŸ¥è©¢
- [ ] é‡æ–°æ¸¬è©¦

#### ä¸‹åˆä»»å‹™ (4 å°æ™‚)

**ä»»å‹™ 5.3: å®Œå–„æ–‡æª”** (2 å°æ™‚)
- [ ] æ›´æ–° `SLACK_TROUBLESHOOTING.md`
- [ ] æ›´æ–° `RUNBOOK.md`

**ä»»å‹™ 5.4: é …ç›®ç¸½çµ** (2 å°æ™‚)
- [ ] æ’°å¯«æ¥­å‹™é‚è¼¯ç¸½çµå ±å‘Š
- [ ] è¨˜éŒ„å­¸åˆ°çš„ç¶“é©—
- [ ] è¨˜éŒ„æœªä¾†æ”¹é€²æ–¹å‘
- [ ] æ…¶ç¥å®Œæˆ! ğŸ‰

---

## æ¯æ—¥åŒæ­¥é»

**ä¸ŠåˆåŒæ­¥ (9:00 AM, 15 åˆ†é˜)**
- åˆ†äº«ä»Šæ—¥è¨ˆç•«
- ç¢ºèªèˆ‡ Agent A çš„ä¾è³´é—œä¿‚
- è§£æ±ºé˜»å¡å•é¡Œ

**ä¸‹åˆåŒæ­¥ (3:00 PM, 15 åˆ†é˜)**
- åˆ†äº«é€²åº¦
- æ›´æ–°äº¤ä»˜ç‰©ç‹€æ…‹
- èª¿æ•´è¨ˆç•« (å¦‚éœ€è¦)

**æ¯æ—¥çµæŸåŒæ­¥ (6:00 PM, 30 åˆ†é˜)**
- Review ç•¶æ—¥æˆæœ
- æ›´æ–°æª¢æŸ¥æ¸…å–®
- æäº¤ä»£ç¢¼åˆ° `feature/business-logic` åˆ†æ”¯
- è¦åŠƒæ˜æ—¥å·¥ä½œ

---

## é©—æ”¶æ¨™æº–

### åŠŸèƒ½é©—æ”¶
- [ ] 96MB éŸ³æª”æˆåŠŸè™•ç† (ç„¡è¶…æ™‚)
- [ ] Queue é‡è©¦æ©Ÿåˆ¶æ­£å¸¸é‹ä½œ
- [ ] MEDDIC åˆ†ææ­£ç¢º
- [ ] Slack é€šçŸ¥æ­£å¸¸ç™¼é€

### ä»£ç¢¼å“è³ª
- [ ] TypeScript ç„¡éŒ¯èª¤
- [ ] æ•´åˆæ¸¬è©¦é€šé
- [ ] E2E æ¸¬è©¦é€šé
- [ ] é€šé `bun x ultracite check`

### æ€§èƒ½
- [ ] 5MB éŸ³æª” < 2 åˆ†é˜
- [ ] 20MB éŸ³æª” < 5 åˆ†é˜
- [ ] 96MB éŸ³æª” < 15 åˆ†é˜
- [ ] ä¸¦ç™¼è™•ç†ç©©å®š
