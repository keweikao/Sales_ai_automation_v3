# Web æ‡‰ç”¨ vs Slack Bot æ¬„ä½å·®ç•°åˆ†æ

**æ—¥æœŸ**: 2026-01-20
**å•é¡Œ**: Slack ä¸Šå‚³éŸ³æª” Modal æœ‰æ”¶é›†å•†æ©Ÿç›¸é—œæ¬„ä½,ä½† Web æ‡‰ç”¨çš„ã€Œæ–°å¢å•†æ©Ÿã€è¡¨å–®å»æ²’æœ‰

---

## Slack ä¸Šå‚³éŸ³æª” Modal æ¬„ä½

### æª”æ¡ˆä½ç½®
- [apps/slack-bot/src/utils/form-builder.ts](apps/slack-bot/src/utils/form-builder.ts)
- [packages/shared/src/product-configs/ichef.ts](packages/shared/src/product-configs/ichef.ts)

### å®Œæ•´æ¬„ä½åˆ—è¡¨ (iCHEF)

#### é€šç”¨æ¬„ä½
1. âœ… **å®¢æˆ¶ç·¨è™Ÿ** (customerNumber) - å¿…å¡«
2. âœ… **å®¢æˆ¶åç¨±** (customerName) - å¿…å¡«  
3. âœ… **å®¢æˆ¶é›»è©±** (contactPhone) - é¸å¡«,ç”¨æ–¼ SMS é€šçŸ¥

#### ç”¢å“ç·šç‰¹å®šæ¬„ä½ (iCHEF)
4. âœ… **åº—å‹** (storeType) - å¿…å¡«
   - å’–å•¡å»³ â˜•
   - é£²æ–™åº— ğŸ§‹
   - é¤å»³ ğŸ½ï¸
   - ç«é‹åº— ğŸ²
   - æ—©é¤åº— ğŸ¥
   - é€Ÿé£Ÿåº— ğŸ”
   - çƒ˜ç„™åº— ğŸ¥–
   - å…¶ä»– ğŸª

5. âœ… **ç‡Ÿé‹å‹æ…‹** (serviceType) - å¿…å¡«
   - å…§ç”¨ç‚ºä¸» ğŸª‘
   - å¤–å¸¶ç‚ºä¸» ğŸ¥¡
   - å¤–é€ç‚ºä¸» ğŸ›µ
   - æ··åˆç¶“ç‡Ÿ ğŸ”„

6. âœ… **ç¾æœ‰POSç³»çµ±** (currentSystem) - å¿…å¡«
   - ç„¡ ğŸ†•
   - iCHEFèˆŠç‰ˆ ğŸ“Ÿ
   - DUDU ğŸ¦†
   - EZTABLE ğŸ“±
   - Inline ğŸ’³
   - å…¶ä»– â“

#### é¡å¤–æ¬„ä½
7. âœ… **æ±ºç­–è€…åœ¨å ´** (decisionMakerPresent) - é¸å¡«
   - æ˜¯ âœ…
   - å¦ âŒ
   - ä¸ç¢ºå®š â“

**ç¸½è¨ˆ**: 7 å€‹æ¬„ä½ (5 å€‹å¿…å¡«, 2 å€‹é¸å¡«)

---

## Web æ‡‰ç”¨ã€Œæ–°å¢å•†æ©Ÿã€æ¬„ä½

### æª”æ¡ˆä½ç½®
- [apps/web/src/routes/opportunities/new.tsx](apps/web/src/routes/opportunities/new.tsx)

### å®Œæ•´æ¬„ä½åˆ—è¡¨

#### å¿…å¡«æ¬„ä½
1. âœ… å®¢æˆ¶ç·¨è™Ÿ (customerNumber)
2. âœ… å…¬å¸åç¨± (companyName)

#### é¸å¡«æ¬„ä½
3. âœ… è¯çµ¡äºº (contactName)
4. âœ… Email (contactEmail)
5. âœ… é›»è©± (contactPhone)
6. âœ… ç”¢æ¥­ (industry) - è‡ªç”±è¼¸å…¥
7. âœ… å…¬å¸è¦æ¨¡ (companySize)
8. âœ… ç‹€æ…‹ (status)
9. âœ… ä¾†æº (source)
10. âœ… å‚™è¨» (notes)

**ç¸½è¨ˆ**: 10 å€‹æ¬„ä½ (2 å€‹å¿…å¡«, 8 å€‹é¸å¡«)

---

## å·®ç•°åˆ†æ

### Web æ‡‰ç”¨**ç¼ºå°‘**çš„é—œéµæ¬„ä½

âŒ **åº—å‹** (storeType)
âŒ **ç‡Ÿé‹å‹æ…‹** (serviceType) - iCHEF å°ˆç”¨
âŒ **ç¾æœ‰POSç³»çµ±** (currentSystem)
âŒ **æ±ºç­–è€…åœ¨å ´** (decisionMakerPresent)

### Slack Modal **ç¼ºå°‘**çš„æ¬„ä½

âŒ è¯çµ¡äºº (contactName)
âŒ Email (contactEmail)
âŒ ç”¢æ¥­ (industry)
âŒ å…¬å¸è¦æ¨¡ (companySize)
âŒ å‚™è¨» (notes)

---

## ç‚ºä»€éº¼æœƒæœ‰å·®ç•°?

### åŸå› åˆ†æ

1. **è¨­è¨ˆæ™‚æ©Ÿä¸åŒ**:
   - Slack Modal: å¾Œä¾†åŠ å…¥,åŸºæ–¼ Product Config å‹•æ…‹ç”Ÿæˆ
   - Web è¡¨å–®: æ—©æœŸè¨­è¨ˆ,é€šç”¨å•†æ©Ÿç®¡ç†è¡¨å–®

2. **ä½¿ç”¨æƒ…å¢ƒä¸åŒ**:
   - Slack: ä¸Šå‚³å°è©±éŸ³æª”æ™‚å¡«å¯«,å°ˆæ³¨æ–¼ **MEDDIC åˆ†ææ‰€éœ€æ¬„ä½**
   - Web: å»ºç«‹å•†æ©Ÿ,å°ˆæ³¨æ–¼ **CRM åŸºæœ¬è³‡è¨Š**

3. **æ¬„ä½ç”¨é€”ä¸åŒ**:
   - storeType, serviceType, currentSystem: **ç”¨æ–¼ MEDDIC åˆ†æ**
   - contactName, industry, companySize: **ç”¨æ–¼ CRM ç®¡ç†**

---

## å•é¡Œå½±éŸ¿

### 1. è³‡æ–™ä¸ä¸€è‡´

- Slack å»ºç«‹çš„å•†æ©Ÿæœ‰ storeType, serviceType, currentSystem
- Web å»ºç«‹çš„å•†æ©Ÿæ²’æœ‰é€™äº›æ¬„ä½
- å°è‡´ MEDDIC åˆ†ææ™‚ç¼ºå°‘é‡è¦ context

### 2. ä½¿ç”¨è€…å›°æƒ‘

- ç‚ºä»€éº¼ Slack æœ‰çš„æ¬„ä½,Web æ²’æœ‰?
- ç‚ºä»€éº¼ Web æœ‰çš„æ¬„ä½,Slack æ²’æœ‰?

### 3. åŠŸèƒ½é™åˆ¶

- Web å»ºç«‹çš„å•†æ©Ÿ,ä¸Šå‚³å°è©±æ™‚ç„¡æ³•é å¡« storeType ç­‰è³‡è¨Š
- éœ€è¦åœ¨ Slack é‡è¤‡å¡«å¯«

---

## å»ºè­°è§£æ±ºæ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: çµ±ä¸€æ¬„ä½é›†åˆ (æ¨è–¦) â­

**ç›®æ¨™**: Web å’Œ Slack ä½¿ç”¨ç›¸åŒçš„æ¬„ä½

#### Web è¡¨å–®æ–°å¢æ¬„ä½:
```typescript
// æ–°å¢ç”¢å“ç·šç›¸é—œæ¬„ä½
- åº—å‹ (storeType) - ä¸‹æ‹‰é¸å–®
- ç‡Ÿé‹å‹æ…‹ (serviceType) - ä¸‹æ‹‰é¸å–®,iCHEF é™å®š
- ç¾æœ‰POSç³»çµ± (currentSystem) - ä¸‹æ‹‰é¸å–®
- æ±ºç­–è€…åœ¨å ´ (decisionMakerPresent) - ä¸‹æ‹‰é¸å–®
```

#### Slack Modal æ–°å¢æ¬„ä½:
```typescript
// æ–°å¢ CRM æ¬„ä½
- è¯çµ¡äºº (contactName)
- Email (contactEmail)
```

#### å„ªé»:
- âœ… å®Œæ•´æ€§: æ‰€æœ‰è³‡è¨Šéƒ½èƒ½åœ¨å…©é‚Šå¡«å¯«
- âœ… ä¸€è‡´æ€§: ä½¿ç”¨è€…é«”é©—çµ±ä¸€
- âœ… MEDDIC åˆ†ææ›´æº–ç¢º

#### ç¼ºé»:
- âš ï¸ Slack Modal æ¬„ä½è¼ƒå¤š,å¯èƒ½éœ€è¦åˆ†é 
- âš ï¸ Web è¡¨å–®æ›´é•·,éœ€è¦å„ªåŒ– UI

---

### æ–¹æ¡ˆ 2: åˆ†éšæ®µå¡«å¯«

**ç›®æ¨™**: ä¿æŒç¾æœ‰ç°¡åŒ–è¨­è¨ˆ,å…è¨±å¾ŒçºŒè£œå……

#### æµç¨‹:
1. Web å»ºç«‹å•†æ©Ÿ â†’ åªå¡«åŸºæœ¬è³‡è¨Š
2. ä¸Šå‚³å°è©±æ™‚ â†’ è£œå…… storeType, serviceType ç­‰
3. å„²å­˜åˆ° Opportunity è¡¨æ ¼

#### å„ªé»:
- âœ… ä¿æŒç¾æœ‰ç°¡åŒ–è¨­è¨ˆ
- âœ… éˆæ´»æ€§é«˜

#### ç¼ºé»:
- âŒ è³‡æ–™å¯èƒ½ä¸å®Œæ•´
- âŒ éœ€è¦ä¿®æ”¹è³‡æ–™åº« schema å’Œ API

---

### æ–¹æ¡ˆ 3: ä½¿ç”¨ç”¢å“ç·šé…ç½®å‹•æ…‹ç”Ÿæˆè¡¨å–® (æœ€ä½³)

**ç›®æ¨™**: Web è¡¨å–®ä¹Ÿä½¿ç”¨ Product Config å‹•æ…‹ç”Ÿæˆ

#### å¯¦ä½œ:
1. åœ¨ Web è¡¨å–®ä¸­é¸æ“‡ç”¢å“ç·š (iCHEF/Beauty)
2. æ ¹æ“šç”¢å“ç·šå‹•æ…‹é¡¯ç¤ºå°æ‡‰æ¬„ä½
3. ä½¿ç”¨ `packages/shared/src/product-configs` çµ±ä¸€ç®¡ç†

#### ç¨‹å¼ç¢¼ç¯„ä¾‹:
```typescript
// apps/web/src/routes/opportunities/new.tsx

import { getProductConfig } from '@sales_ai_automation_v3/shared/product-configs';

function NewOpportunityPage() {
  const [productLine, setProductLine] = useState('ichef');
  const config = getProductConfig(productLine);
  
  return (
    <form>
      {/* åŸºæœ¬æ¬„ä½ */}
      <Input name="customerNumber" />
      <Input name="companyName" />
      
      {/* ç”¢å“ç·šé¸æ“‡ */}
      <Select value={productLine} onChange={setProductLine}>
        <option value="ichef">iCHEF POS</option>
        <option value="beauty">Beauty</option>
      </Select>
      
      {/* å‹•æ…‹æ¬„ä½ */}
      <Select name="storeType">
        {config.formFields.storeType.options.map(opt => (
          <option value={opt.value}>{opt.label}</option>
        ))}
      </Select>
      
      {productLine === 'ichef' && (
        <Select name="serviceType">
          {config.formFields.serviceType?.options.map(opt => (
            <option value={opt.value}>{opt.label}</option>
          ))}
        </Select>
      )}
    </form>
  );
}
```

#### å„ªé»:
- âœ… å–®ä¸€çœŸç›¸ä¾†æº (Product Config)
- âœ… è‡ªå‹•æ”¯æ´æ–°ç”¢å“ç·š
- âœ… ç¶­è­·å®¹æ˜“
- âœ… Web å’Œ Slack å®Œå…¨ä¸€è‡´

#### ç¼ºé»:
- âš ï¸ éœ€è¦é‡æ§‹ Web è¡¨å–®
- âš ï¸ éœ€è¦æ›´æ–°è³‡æ–™åº« schema

---

## æ¨è–¦å¯¦ä½œé †åº

### Phase 1: è³‡æ–™åº« Schema æ›´æ–°

```sql
-- ç‚º opportunities è¡¨æ ¼æ–°å¢æ¬„ä½
ALTER TABLE opportunities ADD COLUMN store_type TEXT;
ALTER TABLE opportunities ADD COLUMN service_type TEXT; -- iCHEF only
ALTER TABLE opportunities ADD COLUMN staff_count TEXT; -- Beauty only
ALTER TABLE opportunities ADD COLUMN current_system TEXT;
ALTER TABLE opportunities ADD COLUMN decision_maker_present TEXT;
```

### Phase 2: API æ›´æ–°

æ›´æ–° `createOpportunity` å’Œ `updateOpportunity` API æ”¯æ´æ–°æ¬„ä½

### Phase 3: Web è¡¨å–®é‡æ§‹

ä½¿ç”¨ Product Config å‹•æ…‹ç”Ÿæˆè¡¨å–®

### Phase 4: é©—è­‰å’Œæ¸¬è©¦

ç¢ºä¿ Web å’Œ Slack å»ºç«‹çš„å•†æ©Ÿéƒ½åŒ…å«å®Œæ•´è³‡è¨Š

---

## ç¸½çµ

**æ ¸å¿ƒå•é¡Œ**: Web å’Œ Slack çš„å•†æ©Ÿæ¬„ä½ä¸ä¸€è‡´

**å½±éŸ¿**:
- è³‡æ–™ä¸å®Œæ•´
- ä½¿ç”¨è€…å›°æƒ‘
- MEDDIC åˆ†ææº–ç¢ºåº¦é™ä½

**æœ€ä½³è§£æ±ºæ–¹æ¡ˆ**: 
ä½¿ç”¨ Product Config çµ±ä¸€ç®¡ç†æ¬„ä½,è®“ Web è¡¨å–®å‹•æ…‹ç”Ÿæˆ,èˆ‡ Slack Modal ä¿æŒä¸€è‡´

**é æœŸæˆæœ**:
- âœ… çµ±ä¸€çš„è³‡æ–™çµæ§‹
- âœ… æ›´å¥½çš„ä½¿ç”¨è€…é«”é©—
- âœ… æ›´æº–ç¢ºçš„ MEDDIC åˆ†æ
- âœ… æ›´æ˜“æ–¼ç¶­è­·å’Œæ“´å±•
